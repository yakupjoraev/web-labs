function burgerMenu(){const e=document.querySelector(".burger"),t=document.querySelector(".menu"),o=document.querySelector("body");e.addEventListener("click",(()=>{t.classList.contains("active")?(t.classList.remove("active"),e.classList.remove("active-burger"),o.classList.remove("hidden")):(t.classList.add("active"),e.classList.add("active-burger"),o.classList.add("hidden"))}));const r=document.querySelectorAll(".menu__item");document.querySelectorAll(".menu__item-btn");r.forEach((r=>{r.addEventListener("click",(function(){r.classList.contains("menu__item-btn")?setTimeout((()=>{t.classList.remove("active"),e.classList.remove("active-burger"),o.classList.remove("hidden")}),800):(t.classList.remove("active"),e.classList.remove("active-burger"),o.classList.remove("hidden"))}))})),window.addEventListener("resize",(()=>{window.innerWidth>991.98&&(t.classList.remove("active"),e.classList.remove("active-burger"),o.classList.remove("locked"))}))}function btnAnimation(){document.querySelectorAll(".btn").forEach((e=>{e.addEventListener("click",(()=>{e.classList.add("animation"),setTimeout((()=>{e.classList.remove("animation")}),1500)}))}))}function updateVideoSource(){const e=document.getElementById("hero-video"),t=document.getElementById("video-source"),o="./video/hero-earn-mobile.mp4",r="./video/hero-earn.mp4";window.innerWidth<767?t.src!==o&&(t.src=o,e.load()):t.src!==r&&(t.src=r,e.load())}function reviewsSlider(){if(!document.querySelector(".reviews"))return null;new Swiper(".reviews__slider",{centeredSlides:!0,slidesPerView:1,spaceBetween:20,navigation:{nextEl:".reviews__slider-arrow--next",prevEl:".reviews__slider-arrow--prev"},pagination:{el:".reviews__slider-pagination",type:"fraction"},breakpoints:{320:{centeredSlides:!0,slidesPerView:1},767:{spaceBetween:0,autoHeight:!0,effect:"coverflow",grabCursor:!0,centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},pagination:{el:".reviews__slider-pagination",type:"bullets"}}}})}function projectsSlider(){new Swiper(".projects__main",{centeredSlides:!0,slidesPerView:1,spaceBetween:20,navigation:{nextEl:".projects__arrow--next",prevEl:".projects__arrow--prev"},pagination:{el:".projects__scrollbar",type:"fraction"},mousewheel:{sensitivity:1,forceToAxis:!0},breakpoints:{320:{centeredSlides:!0,slidesPerView:1},767:{spaceBetween:20,grabCursor:!0,centeredSlides:!1,slidesPerView:2,direction:"horizontal",scrollbar:{el:".projects__scrollbar",draggable:!0,snapOnRelease:!0,dragSize:"auto"}},991:{spaceBetween:20,grabCursor:!0,centeredSlides:!1,slidesPerView:3,direction:"horizontal",scrollbar:{el:".projects__scrollbar",draggable:!0,snapOnRelease:!0,dragSize:"auto"}}}})}function clientsSlider(){new Swiper(".clients__slider",{centeredSlides:!0,slidesPerView:1,spaceBetween:20,navigation:{nextEl:".clients__arrow--next",prevEl:".clients__arrow--prev"},pagination:{el:".clients__scrollbar",type:"fraction"},mousewheel:{sensitivity:1,forceToAxis:!0},breakpoints:{320:{centeredSlides:!0,slidesPerView:1},767:{spaceBetween:20,grabCursor:!0,centeredSlides:!1,slidesPerView:6,direction:"horizontal",scrollbar:{el:".clients__scrollbar",draggable:!0,snapOnRelease:!0,dragSize:"auto"}}}})}function dateInputs(){const e=document.querySelectorAll("[data-mask-input]");if(!e)return null;e.forEach((e=>{IMask(e,{mask:"+{7}(000)000-00-00"})}))}function validateForm(){document.querySelectorAll(".form__main").forEach((e=>{e.setAttribute("novalidate",!0);let t=e.querySelectorAll(".js-input");const o=e.querySelector(".js-input-email"),r=e.querySelector(".js-input-phone");e.onsubmit=function(s){s.preventDefault();let n=o.value,i=r.value,l=!0;if(t.forEach((function(e){""===e.value?(e.classList.add("error"),console.log("input not filled"),l=!1):e.classList.remove("error")})),e.querySelectorAll(".form__select").forEach((function(e){""===e.value||"Выберите услугу"===e.value?(e.classList.add("error"),console.log("select not valid"),l=!1):e.classList.remove("error")})),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(n).toLowerCase())?o.classList.remove("error"):(console.log("email not valid"),o.classList.add("error"),l=!1),/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/.test(String(i))?r.classList.remove("error"):(console.log("phone not valid"),r.classList.add("error"),l=!1),l){const o=new FormData(e);fetch("mail.php",{method:"POST",body:o}).then((e=>e.text())).then((o=>{console.log("Success:",o),t.forEach((e=>{e.value=""})),e.querySelectorAll(".form__select").forEach((e=>{e.value=""})),document.querySelectorAll(".modal").forEach((e=>{e.classList.remove("show")}));const r=document.querySelector(".modal-complete");r.classList.add("show"),document.body.classList.add("locked"),setTimeout((()=>{r.classList.remove("show"),document.querySelector(".modal.show")||document.body.classList.remove("locked")}),3e3)})).catch((e=>{console.error("Error:",e)}))}else console.log("form not valid")}}))}burgerMenu(),btnAnimation(),updateVideoSource(),window.addEventListener("resize",updateVideoSource),document.addEventListener("DOMContentLoaded",(function(){if(!document.querySelector(".nums"))return;const e=document.querySelectorAll(".nums__item-num");if(0===e.length)return;const t=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const o=e.target;!function(e){const t=e.getAttribute("data-target"),o=t.includes("+"),r=parseInt(t.replace("+",""),10),s=r/100;!function t(){const n=parseInt(e.innerText.replace("+",""),10);n<r?(e.innerText=Math.ceil(n+s)+(o?"+":""),setTimeout(t,20)):e.innerText=r+(o?"+":"")}()}(o),t.unobserve(o)}}))}),{threshold:.5});e.forEach((e=>{t.observe(e)}))})),reviewsSlider(),projectsSlider(),clientsSlider(),dateInputs(),validateForm();const openModalBtns=document.querySelectorAll(".open-modal-btn"),closeModalBtns=document.querySelectorAll(".close-modal-btn"),modals=document.querySelectorAll(".modal"),body=document.querySelector("body");openModalBtns.forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.modalId;document.getElementById(t).classList.add("show"),body.classList.add("locked")}))})),closeModalBtns.forEach((e=>{e.addEventListener("click",(()=>{e.closest(".modal").classList.remove("show"),document.querySelector(".modal.show")||body.classList.remove("locked")}))})),window.addEventListener("click",(e=>{e.target.classList.contains("modal")&&(e.target.classList.remove("show"),document.querySelector(".modal.show")||body.classList.remove("locked"))})),customSelect("select");